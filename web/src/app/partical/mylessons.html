<div class="container-fluid" ng-cloak>
    <div class="row" style="height:80%;overflow-y:auto;">
        <div class="col-md-3">
            <div class="panel panel-info" ng-repeat="unit in vm.units" style="margin-bottom:4px;">
                <div class="panel-heading"><b ng-bind="unit.name" style="margin-left:-4px;"></b></div>
                <div class="list-group">
                    <a class="list-group-item" href="javascript:void(0);" ng-repeat="lesson in unit.lessons" ng-click="vm.selectLesson(lesson)" ng-bind="lesson.name" style="padding-left:20px;"></a>
                </div>
            </div>
        </div>
        <div class="col-md-9">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h2 ng-bind="vm.lesson.name" style="margin:0px 0px 4px"></h2>
                </div>
                <div class="embed-responsive embed-responsive-16by9" ng-if="vm.lesson.options">
                    <jwplayerjs player-id="videoPlayer" setup="vm.lesson.options"></jwplayerjs>
                </div>
                <div class="panel-footer">
                    <div ng-bind="vm.lesson.description"></div>
                    <div ng-if="vm.lesson.files">
                        <span>Related files: </span>
                        <span>
                            <span ng-repeat="file in vm.lesson.files">
                                <a target="_self" href="{{file.filePath}}" download="{{file.fileName}}" title="Download file" class="btn btn-default btn-sm">
                                    <i class="fa fa-file-pdf-o" aria-hidden="true"></i> 
                                    <span ng-bind="file.fileName"></span>
                                </a>
                            </span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="row" ng-if="vm.lesson.isCommentingAllowed">
                <div class="col-md-10">
                    <textarea rows="3" style="width:96%" ng-model="vm.commentMsg"></textarea>
                </div>
                <div class="col-md-2">
                    <button type="button" class="btn btn-default" ng-click="vm.commentOnLesson()">
                        Send
                    </button>
                </div>
            </div>
            <div class="row" ng-if="vm.lesson.isCommentingAllowed">
                <div class="col-md-12">
                    <div class="media" ng-repeat="comment in vm.lesson.comments">
                        <div class="media-left">
                            <a href="#">
                                <img class="media-object" ng-src="{{comment.commentedBy.profilePhoto || 'assets/images/defaultProfileImg.png'}}" alt="..." style="height:45px;">
                            </a>
                        </div>
                        <div class="media-body well well-sm">
                            <div class="media-heading">
                                <h4 ng-bind="comment.commentedBy.fullName" style="margin:0px;"></h4>
                                <span style="font-size: smaller;" ng-bind="comment.timestamp | date: format: medium"></span>
                            </div>
                            <p ng-bind="comment.comments"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
